<!DOCTYPE html>
<html data-bs-theme="auto" xmlns:th="http//www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layouts/default-without-header}">

<head>
    <title>mavi karga</title>

    <!-- 커스텀 스크롤 디자인 -->
    <link rel="stylesheet" href="/static/css/scroll_box.css" th:href="@{/css/scroll_box.css}">
    <style>
        /* 상세 설명 커스텀 스크롤 높이 */
        .scroll {
            height: 100%;
        }

        /* carousel 높이 32rem -> auto  */
        .carousel-item {
            height: auto;
        }

        /* modal-header가 modal-content 위에 오버랩해서 위치하도록 */
        .modal-header-overlap {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }
    </style>
    <!-- js -->
    <script src="/static/bootstrap-5.3.2-dist/js/bootstrap.bundle.min.js"
        th:src="@{/bootstrap-5.3.2-dist/js/bootstrap.bundle.min.js}"></script>
    <!-- carousel 왼쪽, 오른쪽 버튼 hovering -->
    <link rel="stylesheet" href="/static/css/carouselBtn.css" th:href="@{/css/carouselBtn.css}">
</head>

<body layout:fragment="content">
    <main>
        <div class="container mt-3 mb-3">
            <div class="row">
                <div class="col-lg-8">
                    <video src="/static/vid/shell_lug_reduced.mp4" th:src="@{/vid/shell_lug_reduced.mp4}" class="w-100"
                        muted controls></video>
                </div>
                <div class="col-lg-4">
                    <div class="scroll scroll2">
                        <div class="content">
                            Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quam et illo, commodi minima
                            similique
                            pariatur enim vero unde necessitatibus laboriosam adipisci dolorem atque rerum ea sunt
                            perferendis iusto deserunt at ipsa. Blanditiis sunt perferendis soluta eaque repellendus
                            consequuntur repellat distinctio facere eum voluptatibus numquam odio tempora possimus
                            ullam,
                            quam illum nam provident ipsa libero, maiores, illo neque. Fuga perspiciatis, quo nesciunt
                            impedit, neque nostrum magni, exercitationem eum maxime doloremque deleniti in quae
                            molestias
                            velit rerum. Sunt quisquam maiores nemo excepturi laboriosam placeat, velit autem nisi
                            similique
                            pariatur vel nam. Quibusdam quam animi magnam nesciunt provident veniam consequuntur
                            pariatur in
                            quod.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <h6>01 Collection: Tree flower me</h6>
            <div class="container-fluid my-3">
                <div class="row product-row">
                    <!-- COL -->
                    <div class="col-6 col-sm-6 col-md-4 col-xl-3 product-placeholder mb-3">
                        <!-- 이미지 링크 -->
                        <a type="button" data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="setCurIdx(0)">
                            <div class="image-container">
                                <img class="original-image img-fluid"
                                    src="/static/image/clothing/KakaoTalk_20240207_105747721.jpg"
                                    th:src="@{/image/clothing/KakaoTalk_20240207_105747721.jpg}" alt="Original Image">
                            </div>
                        </a>
                    </div>
                    <!-- COL -->
                    <div class="col-6 col-sm-6 col-md-4 col-xl-3 product-placeholder mb-3">
                        <!-- 이미지 링크 -->
                        <a type="button" data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="setCurIdx(1)">
                            <div class="image-container">
                                <img class="original-image img-fluid"
                                    src="/static/image/clothing/KakaoTalk_20240207_105747721_02.jpg"
                                    th:src="@{/image/clothing/KakaoTalk_20240207_105747721_02.jpg}"
                                    alt="Original Image">
                            </div>
                        </a>
                    </div>
                    <!-- COL -->
                    <div class="col-6 col-sm-6 col-md-4 col-xl-3 product-placeholder mb-3">
                        <!-- 이미지 링크 -->
                        <a type="button" data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="setCurIdx(2)">
                            <div class="image-container">
                                <img class="original-image img-fluid"
                                    src="/static/image/clothing/KakaoTalk_20240207_105747721_02.jpg"
                                    th:src="@{/image/clothing/KakaoTalk_20240207_105747721_02.jpg}"
                                    alt="Original Image">
                            </div>
                        </a>
                    </div>
                    <!-- COL -->
                    <div class="col-6 col-sm-6 col-md-4 col-xl-3 product-placeholder mb-3">
                        <!-- 이미지 링크 -->
                        <a type="button" data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="setCurIdx(3)">
                            <div class="image-container">
                                <img class="original-image img-fluid"
                                    src="/static/image/clothing/KakaoTalk_20240207_105747721_02.jpg"
                                    th:src="@{/image/clothing/KakaoTalk_20240207_105747721_02.jpg}"
                                    alt="Original Image">
                            </div>
                        </a>
                    </div>
                    <!-- COL -->
                    <div class="col-6 col-sm-6 col-md-4 col-xl-3 product-placeholder mb-3">
                        <!-- 이미지 링크 -->
                        <a type="button" data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="setCurIdx(4)">
                            <div class="image-container">
                                <img class="original-image img-fluid"
                                    src="/static/image/clothing/KakaoTalk_20240207_105747721_02.jpg"
                                    th:src="@{/image/clothing/KakaoTalk_20240207_105747721_02.jpg}"
                                    alt="Original Image">
                            </div>
                        </a>
                    </div>
                    <!-- COL -->
                    <div class="col-6 col-sm-6 col-md-4 col-xl-3 product-placeholder mb-3">
                        <!-- 이미지 링크 -->
                        <a type="button" data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="setCurIdx(5)">
                            <div class="image-container">
                                <img class="original-image img-fluid"
                                    src="/static/image/clothing/KakaoTalk_20240207_105747721_02.jpg"
                                    th:src="@{/image/clothing/KakaoTalk_20240207_105747721_02.jpg}"
                                    alt="Original Image">
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- divider -->
        <div class="container">
            <hr class="featurette-divider">
        </div>

        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog  modal-dialog-scrollable modal-fullscreen">
                <div class="modal-content ">
                    <!-- modal header -->
                    <div class="modal-header modal-header-overlap" style="border-bottom: none; height: 1rem;">
                        <!-- <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1> -->
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <!-- modal body -->
                    <div class="modal-body" style="padding: 0;">
                        <!-- carousel -->
                        <div class="container-fluid p-0">
                            <div id="productCarousel" class="carousel slide row m-0" style="">
                                <!-- left container -->
                                <div class="p-0 col-lg-4">
                                    <button style="" class="carousel-btn" id="carousel-prev-btn">
                                        <div class="carousel-inner">
                                            <div class="carousel-item active">
                                                <img src="/static/image/clothing/KakaoTalk_20240207_105747721.jpg"
                                                    th:src="@{/image/clothing/KakaoTalk_20240207_105747721.jpg}"
                                                    class="d-block img-fluid" alt="...">
                                                <div style="display: none;">
                                                    <p>01/03</p>
                                                    <p>product name 1</p>
                                                </div>
                                            </div>
                                            <div class="carousel-item">
                                                <img src="/static/image/clothing/KakaoTalk_20240207_105747721_02.jpg"
                                                    th:src="@{/image/clothing/KakaoTalk_20240207_105747721_02.jpg}"
                                                    class="d-block img-fluid" alt="...">
                                                <div style="display: none;">
                                                    <p>02/03</p>
                                                    <p>product name 2</p>
                                                </div>
                                            </div>
                                            <div class="carousel-item">
                                                <img src="/static/image/clothing/KakaoTalk_20240207_105747721_07.jpg"
                                                    th:src="@{/image/clothing/KakaoTalk_20240207_105747721_07.jpg}"
                                                    class="d-block img-fluid" alt="...">
                                                <div style="display: none;">
                                                    <p>03/03</p>
                                                    <p>product name 3</p>
                                                </div>
                                            </div>
                                        </div>
                                    </button>
                                </div>
                                <!-- right container -->
                                <div class="col-lg-8 p-0" style="">
                                    <button id="carousel-next-btn" class="w-100 h-100 carousel-btn">
                                        <div class="container w-100 h-100">
                                            <div style="height: 40%;">
                                            </div>
                                            <!-- 상품 번호 -->
                                            <div class="">
                                                <p class="text-start" id="display-product-info-number">01/29</p>
                                            </div>
                                            <!-- 상품 이름 -->
                                            <div style="position: absolute; bottom: 0; right:5%;">
                                                <p class="text-end" id="display-product-info-name">product name</p>
                                            </div>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End of Modal -->
    </main>

    <script>
        // 현재 active 상태인 carousel-item 이 몇번째 인지 나타내는 인덱스 
        let curCarouselIdx = 0;

        // 모든 carousel-item 들 
        const carouselItems = document.querySelectorAll('.carousel-item');
        const displayProductNumber = document.getElementById('display-product-info-number');
        const displayProductName = document.getElementById('display-product-info-name');

        // 현재 active 상태인 carousel-item을 나타내는 curCarouselIdx 업데이트 
        function setCurIdx(idx) {
            curCarouselIdx = idx;
            // 모든 아이템들에서 active 제거   
            carouselItems.forEach(item => {
                item.classList.remove('active');
            });
            // 선택된 아이템에 active 추가 
            carouselItems[curCarouselIdx].classList.add('active')
            // carousel 에 표시되는 상품 이름,정보 업데이트 
            updateProductInfo(curCarouselIdx);
        }

        // carousel에 표시되는 상품 이름,정보를 현재 active 상태인 carousel-item 의 정보로 업데이트 
        function updateProductInfo(activeIndex) {
            // 현재 active 상태인 carousel-item 
            const activeItem = carouselItems[activeIndex];
            // 번호,이름
            const productNumber = activeItem.querySelector('div:nth-child(2) > p:nth-child(1)').innerText;
            const productName = activeItem.querySelector('div:nth-child(2) > p:nth-child(2)').innerText;            
            // 업데이트 
            displayProductNumber.innerText = productNumber;
            displayProductName.innerText = productName;
        }

        // carousel 클릭으로 다음 이미지로 넘어가면, 대응하는 상품 번호, 이름을 
        // .display-product-info-number, .display-product-info-name 에 디스플레이함 
        document.addEventListener("DOMContentLoaded", function () {
            carouselItems[curCarouselIdx].classList.add('active');

            // 처음에는 첫 carousel-item 의 번호,이름 디스플레이 
            updateProductInfo(curCarouselIdx);

            const productCarousel = document.getElementById('productCarousel');
            productCarousel.addEventListener('slide.bs.carousel', function (event) {
                const activeIndex = event.to;
                updateProductInfo(activeIndex);
            });
        });

    </script>

    <script>
        // 화면의 좌측 클릭, 우측 클릭으로 이전,다음 carousel-item 디스플레이 함 
        const myCarouselElement = document.querySelector('#productCarousel')

        const carousel = new bootstrap.Carousel(myCarouselElement, {
            interval: 2000,
            touch: false
        })

        const carouselPrevBtn = document.getElementById('carousel-prev-btn');
        const carouselNextBtn = document.getElementById('carousel-next-btn');

        carouselNextBtn.addEventListener('click', function () {
            carousel.next();
        });

        carouselPrevBtn.addEventListener('click', function () {
            carousel.prev();
        });

    </script>
</body>

</html>